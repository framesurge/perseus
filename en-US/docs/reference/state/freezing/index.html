<!DOCTYPE html>
<html class="light"><head><base href="https://framesurge.sh/perseus/" />
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href=".perseus/static/tailwind.css"/><link rel="stylesheet" href=".perseus/static/styles/style.css"/>
            <script type="module">window.__PERSEUS_RENDER_CFG = `{"docs/next/fundamentals/plugins":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/reference/templates/setting-headers":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/0.3.4/tutorials/auth":"docs","docs/next/fundamentals/testing":"docs","docs/next/state/request":"docs","docs/0.4.x/core-principles":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/next/faq":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/tutorials/hello-world":"docs","docs/0.2.x/views":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/0.2.x/intro":"docs","docs/0.3.4/reference/plugins/tinker":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/next/state/revalidation":"docs","docs/0.1.x/error_pages":"docs","docs/0.2.x/testing/intro":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/reference/testing/intro":"docs","docs/reference/testing/fantoccini-basics":"docs","docs/next/state/suspense":"docs","docs/0.4.x/reference/state-platform":"docs","docs/advanced/routing":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/0.2.x/strategies/request-state":"docs","docs/reference/plugins/tinker":"docs","docs/reference/plugins/writing":"docs","docs/next/fundamentals/js-interop":"docs","docs/next/state/freezing-thawing":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/0.1.x/config_managers":"docs","docs/reference/templates/intro":"docs","docs/next/first-app/installation":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/reference/error-pages":"docs","docs/reference/i18n/defining":"docs","docs/0.2.x/templates/intro":"docs","docs/next/fundamentals/static-content":"docs","docs/0.3.4/reference/engines":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/0.2.x/config-managers":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/reference/strategies/request-state":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/0.2.x/cli":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/advanced/initial-loads":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/reference/deploying/intro":"docs","docs/reference/updating":"docs","docs/advanced/route-announcer":"docs","docs/advanced/intro":"docs","docs/0.2.x/testing/manual":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/0.3.0-0.3.3/views":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.3.4/reference/live-reloading":"docs","":"","docs/next/state/global":"docs","docs/reference/views":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/next/fundamentals/debugging":"docs","docs/0.2.x/updating":"docs","docs/next/capsules/intro":"docs","docs/reference/deploying/serverless":"docs","docs/reference/live-reloading":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/next/fundamentals/reactor":"docs","docs/next/fundamentals/error-views":"docs","docs/0.1.x/intro":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/0.3.4/reference/stores":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/advanced/subsequent-loads":"docs","docs/reference/strategies/build-paths":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.1.x/templates":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/0.2.x/advanced/routing":"docs","docs/next/capsules/using":"docs","docs/reference/static-content":"docs","docs/next/state/manual":"docs","docs/next/fundamentals/styling":"docs","docs/reference/i18n/other-engines":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/reference/deploying/relative-paths":"docs","docs/next/quickstart":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/reference/perseus-app":"docs","docs/0.2.x/i18n/using":"docs","docs/reference/hydration":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/reference/exporting":"docs","plugins":"plugins","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/0.4.x/reference/initial_subsequent_loads":"docs","docs/0.2.x/advanced/intro":"docs","docs/reference/i18n/translations-managers":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/reference/plugins/control":"docs","docs/reference/strategies/intro":"docs","docs/reference/server-communication":"docs","docs/reference/engines":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.1.x/building":"docs","docs/0.3.4/reference/plugins/functional":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/reference/debugging":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/reference/templates/metadata-modification":"docs","docs/0.3.4/reference/server-communication":"docs","docs/0.3.4/reference/templates/intro":"docs","docs/next/migrating":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/0.3.4/reference/snooping":"docs","docs/next/first-app/deploying":"docs","comparisons":"comparisons","docs/0.1.x/arch":"docs","docs/0.4.x/reference/faq":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/reference/strategies/revalidation":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/next/first-app/error-handling":"docs","docs/0.3.4/reference/static-content":"docs","docs/0.4.x/reference/compilation-times":"docs","docs/reference/state/global":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/reference/define-app":"docs","docs/next/first-app/dev-cycle":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/reference/testing/manual":"docs","docs/0.4.x/reference/deploying":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/next/core-principles":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/next/fundamentals/perseus-app":"docs","docs/reference/plugins/intro":"docs","docs/reference/plugins/security":"docs","docs/0.1.x/strategies/build_state":"docs","docs/intro":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/0.3.4/reference/define-app":"docs","docs/0.3.4/tutorials/second-app":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/0.3.4/reference/state/rx":"docs","docs/reference/state/hsr":"docs","docs/reference/templates/router-state":"docs","docs/reference/testing/checkpoints":"docs","docs/next/state/incremental":"docs","docs/0.3.4/reference/updating":"docs","docs/0.4.x/reference/i18n":"docs","docs/next/first-app/defining":"docs","docs/next/fundamentals/i18n":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.2.x/error-pages":"docs","docs/0.1.x/strategies/intro":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.3.4/reference/error-pages":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/reference/index-view":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.4.x/what-is-perseus":"docs","docs/0.4.x/reference/plugins":"docs","docs/reference/strategies/build-state":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/0.3.4/reference/i18n/other-engines":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.4.x/features":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/0.4.x/reference/migrating":"docs","docs/0.3.4/reference/exporting":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/0.4.x/reference/state-generation":"docs","docs/0.2.x/debugging":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/reference/stores":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.1.x/routing":"docs","docs/next/fundamentals/routing":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/reference/i18n/using":"docs","docs/0.3.4/intro":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/reference/state/rx":"docs","docs/next/intro":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/advanced/arch":"docs","docs/tutorials/second-app":"docs","docs/reference/deploying/docker":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/next/state/amalgamation":"docs","docs/reference/deploying/serverful":"docs","docs/0.3.4/reference/views":"docs","docs/reference/pitfalls-and-bugs":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/reference/deploying/size":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.1.x/cli":"docs","docs/0.1.x/serving":"docs","docs/next/state/build":"docs","docs/next/state/helper":"docs","docs/reference/plugins/using":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/0.3.4/reference/ejecting":"docs","docs/next/first-app/generating-pages":"docs","docs/reference/ejecting":"docs","docs/0.3.4/reference/index-view":"docs","docs/reference/state/freezing":"docs","docs/0.2.x/define-app":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/0.3.4/what-is-perseus":"docs","docs/reference/i18n/intro":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/next/state/intro":"docs","docs/what-is-perseus":"docs","docs/core-principles":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/reference/styling":"docs","docs/0.3.4/core-principles":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/0.3.4/advanced/arch":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.2.x/i18n/other-engines":"docs","docs":"docs","docs/0.3.4/reference/cli":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/tutorials/auth":"docs","docs/0.3.4/reference/state/global":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/0.4.x/reference/architecture":"docs","docs/0.3.4/reference/deploying/size":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.2.x/hello-world":"docs","docs/reference/plugins/functional":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/0.2.x/i18n/defining":"docs","docs/reference/cli":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/0.3.4/advanced/routing":"docs","docs/reference/plugins/publishing":"docs","docs/0.4.x/reference/exporting":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/0.3.4/advanced/intro":"docs","docs/reference/state/idb-freezing":"docs","docs/reference/snooping":"docs","docs/0.4.x/intro":"docs","docs/0.4.x/reference/live-reloading-and-hsr":"docs","docs/next/fundamentals/hydration":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/next/what-is-perseus":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/reference/strategies/incremental":"docs","docs/0.3.4/reference/styling":"docs","docs/0.2.x/styling":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/reference/strategies/amalgamation":"docs","docs/next/state/browser":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/0.2.x/ejecting":"docs","docs/0.2.x/second-app":"docs","docs/0.2.x/static-content":"docs","docs/0.1.x/setup":"docs","docs/0.4.x/reference/hydration":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/next/fundamentals/preloading":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.4.x/reference/router":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.2.x/advanced/initial-loads":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script>
            <meta itemprop="__perseus_head_boundary" content="">
            
<title>State Freezing | Perseus Docs</title><link rel="stylesheet" href=".perseus/static/styles/markdown.css"/><link rel="stylesheet" href=".perseus/static/styles/docs_links_markdown.css"/><link rel="stylesheet" href=".perseus/static/prism.css"/>
            <script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>State Freezing</h1>\\n<p>If you use the reactive and global state systems to their full potential, your entire app can be represented as its state. So what if you could make all that state unreactive again, serialize it to a string, and keep it for later? Well, you'd be able to let your users pick up at the <em>exact</em> same place they were when they come back later. Imagine you're in the middle of filling out some forms and then your computer crashes. You boot back up and go to the website you were on. If it's built with Perseus and state freezing occurred just before the crash, you're right back to where you were. Same page, same inputs, same everything.</p>\\n<p>Specifically, Perseus achieves this by serializing the global state and the page state store, along with the route that the user's currently on. You can invoke this easily by running <code>.freeze()</code> on the render context, which you can access with <code>perseus::get_render_ctx!()</code>. Best of all, if state hasn't been used yet (e.g. a page hasn't been visited), it won't be cached, because it doesn't need to be. That also applies to global state, meaning the size of your frozen output is minimized (note that this isn't property-level granular yet, but that <em>might</em> be investigated in future).</p>\\n<h2>Example</h2>\\n<p>You can easily imperatively instruct your app to freeze itself like so (see <a href=\\"https://github.com/arctic-hen7/perseus/tree/main/examples/core/freezing_and_thawing/src/templates/index.rs\\">here</a>):</p>\\n<pre><code class=\\"language-rust\\">use perseus::state::Freeze;\\nuse perseus::{Html, RenderFnResultWithCause, Template};\\nuse sycamore::prelude::*;\\n\\nuse crate::global_state::AppStateRx;\\n\\n#[perseus::make_rx(IndexPropsRx)]\\npub struct IndexProps {\\n    username: String,\\n}\\n\\n#[perseus::template_rx]\\npub fn index_page(state: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {\\n    let username = state.username;\\n    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released\\n    let test = global_state.test;\\n    let test_2 = test.clone();\\n\\n    // This is not part of our data model, we do NOT want the frozen app synchronized as part of our page's state, it should be separate\\n    let frozen_app = Signal::new(String::new());\\n    let frozen_app_2 = frozen_app.clone();\\n    let frozen_app_3 = frozen_app.clone();\\n    let render_ctx = perseus::get_render_ctx!();\\n\\n    view! {\\n        // For demonstration, we'll let the user modify the page's state and the global state arbitrarily\\n        p(id = &quot;page_state&quot;) { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n        input(id = &quot;set_page_state&quot;, bind:value = username_2, placeholder = &quot;Username&quot;)\\n        p(id = &quot;global_state&quot;) { (test.get()) }\\n        input(id = &quot;set_global_state&quot;, bind:value = test_2, placeholder = &quot;Global state&quot;)\\n\\n        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)\\n        a(href = &quot;about&quot;, id = &quot;about-link&quot;) { &quot;About&quot; }\\n        br()\\n\\n        button(id = &quot;freeze_button&quot;, on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {\\n            frozen_app.set(render_ctx.freeze());\\n        })) { &quot;Freeze!&quot; }\\n        p(id = &quot;frozen_app&quot;) { (frozen_app.get()) }\\n\\n        input(id = &quot;thaw_input&quot;, bind:value = frozen_app_2, placeholder = &quot;Frozen state&quot;)\\n        button(id = &quot;thaw_button&quot;, on:click = cloned!(frozen_app_3, render_ctx =&gt; move |_| {\\n            render_ctx.thaw(&amp;frozen_app_3.get(), perseus::state::ThawPrefs {\\n                page: perseus::state::PageThawPrefs::IncludeAll,\\n                global_prefer_frozen: true\\n            }).unwrap();\\n        })) { &quot;Thaw...&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;index&quot;)\\n        .build_state_fn(get_build_state)\\n        .template(index_page)\\n}\\n\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(\\n    _path: String,\\n    _locale: String,\\n) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {\\n    Ok(IndexProps {\\n        username: &quot;&quot;.to_string(),\\n    })\\n}\\n\\n</code></pre>\\n<h2>Thawing</h2>\\n<p>Recovering your app's state from a frozen state is called <em>thawing</em> in Perseus (basically like hydration for state, but remember that hydration is for views and thawing is for state!), and it can occur gradually and automatically once you provide Perseus a frozen state to use, which you can do by calling <code>.thaw()</code> on the render context (which you can get with <code>perseus::get_render_ctx!()</code>). How you store and retrieve frozen state is entirely up to you. For example, you could store the user's last state in a database and then fetch that when the user logs in, or you could store it in IndexedDB and have even logging in be covered by it (if authentication tokens are part of your global state). Note that thawing will also return the user to the page they were on when the state was thawed.</p>\\n<p>One important thing to understand about thawing though is how Perseus decided what state to use for a template, because there can be up to three options. Every template that accepts state will have generated state that's provided to it from the generation processes on the server, but there could also be a frozen state and an active state (some state that's already been made reactive). The server-generated state is always the lowest priority, and it will be used if no active or frozen state is available. However, deciding between frozen and active state is more complicated. If only one is available, it will of course be used, but it both are available, the choice is yours. You can represent this choice through the <code>ThawPrefs</code> <code>struct</code>, which must be provided to a call to <code>.thaw()</code> as the second argument. This has two fields, one for page state, and another for global state. For global state, you can set the <code>global_prefers_frozen</code> field to <code>true</code> if you want to override active global state with a frozen one. For page state, you'll use <code>PageThawPrefs</code>, which can be set to <code>IncludeAll</code> (all pages will prefer frozen state), <code>Include(Vec&lt;String&gt;)</code> (the listed pages will prefer frozen state, all others will prefer active state), or <code>Exclude(Vec&lt;String&gt;)</code> (the listed pages will prefer active state, all others will prefer frozen state). There's no <code>ExcludeAll</code> option because that would defeat the entire purpose of thawing.</p>\\n<p>It may at first be tempting to use <code>IncludeAll</code>, but this is an important UX decision that you should consider carefully. Using frozen state when active state isn't available is automatic, but preferring frozen state <em>over</em> active state translates to something like this: a user does some stuff, then state is thawed, everything they did at the start is gone and replaced with whatever they did in the previous session. This might be entirely reasonable in pages that can only be accessed after thawing is complete, but in pages that are accessible at all times, this could be extremely irritating to your users!</p>\\n<details>\\n<summary>Thawing isn't working...</summary>\\n<p>It may seem sometimes like thawing has completely failed, and this is usually for one of two reasons.</p>\\n<ol>\\n<li>You're extracting the state of another page.</li>\\n<li>You're getting the global state without having it as the second argument to your template function. (In other words, you're getting it manually through <code>perseus::get_render_ctx!().global_state.borrow()</code>).</li>\\n</ol>\\n<p>In the first case, the reasoning is simple. State thawing is a gradual process, so the state for a page won't be thawed until the user actually visits that page. This is why it's much better to use global state for state that needs to be shared between pages, and you should generally avoid extracting state from other pages.</p>\\n<p>In the second case, the reason is similar. When you get the global state directly in this way, you bypass the thawing process altogether, meaning thawed state won't show up. If you need to access the global state, you should do it by making it the second argument to your template function (as documented <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">here</a>).</p>\\n<p><em>Note: in a future version of Perseus, thawing logic may be altered so that direct access does become possible, but it's currently not.</em></p>\\n</details>\\n","current_version":"0.3.4","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"stable"},"0.4.x":{"docs_rs":"0.4.0-beta","git":"HEAD","state":"beta"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app\\"><code>PerseusApp</code></a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app\\"><code>define_app!</code></a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views\\">Writing Views</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view\\">The Index View</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading\\">Live Reloading</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing\\">State Freezing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing\\">Freezing to IndexedDB</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr\\">Hot State Reloading (HSR)</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines\\">Engines</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating\\">Migrating from v0.3.3</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer\\">Route Announcer</a></li>\\n</ul>\\n<hr />\\n<h1>Further Tutorials</h1>\\n<ul>\\n<li><a href=\\"docs/tutorials/auth\\">Authentication</a></li>\\n</ul>\\n","status":"Stable","title":"State Freezing"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>ðŸ’¯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "Â© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script>
            <meta itemprop="__perseus_head_end" content="">
            <script>//</script>
            </head><body class="bg-white dark:bg-neutral-900"><div id="root"><header data-hk="8.0" class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk="8.1" class="flex justify-between items-center"><a data-hk="8.2" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font" href="en-US/">Perseus</a><div data-hk="8.3" class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 "><div data-hk="8.4" class="tham-box"><div data-hk="8.5" class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk="8.6" class="hidden md:flex"><ul data-hk="8.7" class="mr-5 flex"><li data-hk="9.0" class="m-3 p-1 title-font"><a data-hk="9.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="9.2" class="m-3 p-1 title-font"><a data-hk="9.3" href="en-US/comparisons" class="px-2">Comparisons</a></li><li data-hk="9.4" class="m-3 p-1 title-font"><a data-hk="9.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul></nav></div><nav data-hk="8.8" id="mobile_nav_menu" class="md:hidden w-full text-center justify-center hidden"><ul data-hk="8.9" class="mr-5"><li data-hk="10.0" class="m-3 p-1 title-font"><a data-hk="10.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="10.2" class="m-3 p-1 title-font"><a data-hk="10.3" href="en-US/comparisons" class="px-2">Comparisons</a></li><li data-hk="10.4" class="m-3 p-1 title-font"><a data-hk="10.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul><hr data-hk="2.0"/><div data-hk="2.1" class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk="2.2" class="flex w-full justify-center text-center"><div data-hk="2.3" class="max-w-3xl flex flex-col"><!--#--><!----><!--/--><!----><!--#--><!----><select data-hk="4.4" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="4.5" value="next">Next (unreleased)</option><option data-hk="4.0" value="0.4.x">v0.4.x (beta)</option><option data-hk="4.6" value="0.3.4" selected="">v0.3.4 (stable)</option><option data-hk="4.1" value="0.3.0-0.3.3">v0.3.0-0.3.3 (outdated)</option><option data-hk="4.2" value="0.2.x">v0.2.x (outdated)</option><option data-hk="4.3" value="0.1.x">v0.1.x (outdated)</option></select><!--/--></div></div><div data-hk="2.4" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/intro">Introduction</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles">Core Principles</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views">Writing Views</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging">Debugging</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages">Error Pages</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content">Static Content</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using">Using Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state">Build State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state">Request State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration">Hydration</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">Global State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli">CLI</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting">Ejecting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling">Styling</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores">Stores</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting">Static Exporting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control">Control Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines">Engines</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating">Migrating from v0.3.3</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch">Architecture</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer">Route Announcer</a></li>
</ul>
<hr />
<h1>Further Tutorials</h1>
<ul>
<li><a href="docs/tutorials/auth">Authentication</a></li>
</ul>
</div></div></nav></header><main data-hk="2.16" id="scroll-container"><div data-hk="2.5" class="flex w-full"><div data-hk="2.6" class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk="2.7" class="mr-5"><div data-hk="2.8" class="text-left text-black dark:text-white p-3"><aside data-hk="2.9"><div data-hk="2.10" class="flex flex-col"><!--#--><!----><!--/--><!----><!--#--><!----><select data-hk="6.4" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="6.5" value="next">Next (unreleased)</option><option data-hk="6.0" value="0.4.x">v0.4.x (beta)</option><option data-hk="6.6" value="0.3.4" selected="">v0.3.4 (stable)</option><option data-hk="6.1" value="0.3.0-0.3.3">v0.3.0-0.3.3 (outdated)</option><option data-hk="6.2" value="0.2.x">v0.2.x (outdated)</option><option data-hk="6.3" value="0.1.x">v0.1.x (outdated)</option></select><!--/--></div><div data-hk="2.11" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/intro">Introduction</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles">Core Principles</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views">Writing Views</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging">Debugging</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages">Error Pages</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content">Static Content</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using">Using Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state">Build State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state">Request State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration">Hydration</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">Global State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli">CLI</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting">Ejecting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling">Styling</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores">Stores</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting">Static Exporting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control">Control Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines">Engines</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating">Migrating from v0.3.3</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch">Architecture</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer">Route Announcer</a></li>
</ul>
<hr />
<h1>Further Tutorials</h1>
<ul>
<li><a href="docs/tutorials/auth">Authentication</a></li>
</ul>
</div></aside></div></div></div><div data-hk="2.12" class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk="2.13" class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><!--#--><!----><!--/--><main data-hk="2.14" class="text-black dark:text-white"><div data-hk="1.0" class="markdown min-w-0 pb-10"><h1>State Freezing</h1>
<p>If you use the reactive and global state systems to their full potential, your entire app can be represented as its state. So what if you could make all that state unreactive again, serialize it to a string, and keep it for later? Well, you'd be able to let your users pick up at the <em>exact</em> same place they were when they come back later. Imagine you're in the middle of filling out some forms and then your computer crashes. You boot back up and go to the website you were on. If it's built with Perseus and state freezing occurred just before the crash, you're right back to where you were. Same page, same inputs, same everything.</p>
<p>Specifically, Perseus achieves this by serializing the global state and the page state store, along with the route that the user's currently on. You can invoke this easily by running <code>.freeze()</code> on the render context, which you can access with <code>perseus::get_render_ctx!()</code>. Best of all, if state hasn't been used yet (e.g. a page hasn't been visited), it won't be cached, because it doesn't need to be. That also applies to global state, meaning the size of your frozen output is minimized (note that this isn't property-level granular yet, but that <em>might</em> be investigated in future).</p>
<h2>Example</h2>
<p>You can easily imperatively instruct your app to freeze itself like so (see <a href="https://github.com/arctic-hen7/perseus/tree/main/examples/core/freezing_and_thawing/src/templates/index.rs">here</a>):</p>
<pre><code class="language-rust">use perseus::state::Freeze;
use perseus::{Html, RenderFnResultWithCause, Template};
use sycamore::prelude::*;

use crate::global_state::AppStateRx;

#[perseus::make_rx(IndexPropsRx)]
pub struct IndexProps {
    username: String,
}

#[perseus::template_rx]
pub fn index_page(state: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {
    let username = state.username;
    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released
    let test = global_state.test;
    let test_2 = test.clone();

    // This is not part of our data model, we do NOT want the frozen app synchronized as part of our page's state, it should be separate
    let frozen_app = Signal::new(String::new());
    let frozen_app_2 = frozen_app.clone();
    let frozen_app_3 = frozen_app.clone();
    let render_ctx = perseus::get_render_ctx!();

    view! {
        // For demonstration, we'll let the user modify the page's state and the global state arbitrarily
        p(id = &quot;page_state&quot;) { (format!(&quot;Greetings, {}!&quot;, username.get())) }
        input(id = &quot;set_page_state&quot;, bind:value = username_2, placeholder = &quot;Username&quot;)
        p(id = &quot;global_state&quot;) { (test.get()) }
        input(id = &quot;set_global_state&quot;, bind:value = test_2, placeholder = &quot;Global state&quot;)

        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)
        a(href = &quot;about&quot;, id = &quot;about-link&quot;) { &quot;About&quot; }
        br()

        button(id = &quot;freeze_button&quot;, on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {
            frozen_app.set(render_ctx.freeze());
        })) { &quot;Freeze!&quot; }
        p(id = &quot;frozen_app&quot;) { (frozen_app.get()) }

        input(id = &quot;thaw_input&quot;, bind:value = frozen_app_2, placeholder = &quot;Frozen state&quot;)
        button(id = &quot;thaw_button&quot;, on:click = cloned!(frozen_app_3, render_ctx =&gt; move |_| {
            render_ctx.thaw(&amp;frozen_app_3.get(), perseus::state::ThawPrefs {
                page: perseus::state::PageThawPrefs::IncludeAll,
                global_prefer_frozen: true
            }).unwrap();
        })) { &quot;Thaw...&quot; }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;index&quot;)
        .build_state_fn(get_build_state)
        .template(index_page)
}

#[perseus::autoserde(build_state)]
pub async fn get_build_state(
    _path: String,
    _locale: String,
) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {
    Ok(IndexProps {
        username: &quot;&quot;.to_string(),
    })
}

</code></pre>
<h2>Thawing</h2>
<p>Recovering your app's state from a frozen state is called <em>thawing</em> in Perseus (basically like hydration for state, but remember that hydration is for views and thawing is for state!), and it can occur gradually and automatically once you provide Perseus a frozen state to use, which you can do by calling <code>.thaw()</code> on the render context (which you can get with <code>perseus::get_render_ctx!()</code>). How you store and retrieve frozen state is entirely up to you. For example, you could store the user's last state in a database and then fetch that when the user logs in, or you could store it in IndexedDB and have even logging in be covered by it (if authentication tokens are part of your global state). Note that thawing will also return the user to the page they were on when the state was thawed.</p>
<p>One important thing to understand about thawing though is how Perseus decided what state to use for a template, because there can be up to three options. Every template that accepts state will have generated state that's provided to it from the generation processes on the server, but there could also be a frozen state and an active state (some state that's already been made reactive). The server-generated state is always the lowest priority, and it will be used if no active or frozen state is available. However, deciding between frozen and active state is more complicated. If only one is available, it will of course be used, but it both are available, the choice is yours. You can represent this choice through the <code>ThawPrefs</code> <code>struct</code>, which must be provided to a call to <code>.thaw()</code> as the second argument. This has two fields, one for page state, and another for global state. For global state, you can set the <code>global_prefers_frozen</code> field to <code>true</code> if you want to override active global state with a frozen one. For page state, you'll use <code>PageThawPrefs</code>, which can be set to <code>IncludeAll</code> (all pages will prefer frozen state), <code>Include(Vec&lt;String&gt;)</code> (the listed pages will prefer frozen state, all others will prefer active state), or <code>Exclude(Vec&lt;String&gt;)</code> (the listed pages will prefer active state, all others will prefer frozen state). There's no <code>ExcludeAll</code> option because that would defeat the entire purpose of thawing.</p>
<p>It may at first be tempting to use <code>IncludeAll</code>, but this is an important UX decision that you should consider carefully. Using frozen state when active state isn't available is automatic, but preferring frozen state <em>over</em> active state translates to something like this: a user does some stuff, then state is thawed, everything they did at the start is gone and replaced with whatever they did in the previous session. This might be entirely reasonable in pages that can only be accessed after thawing is complete, but in pages that are accessible at all times, this could be extremely irritating to your users!</p>
<details>
<summary>Thawing isn't working...</summary>
<p>It may seem sometimes like thawing has completely failed, and this is usually for one of two reasons.</p>
<ol>
<li>You're extracting the state of another page.</li>
<li>You're getting the global state without having it as the second argument to your template function. (In other words, you're getting it manually through <code>perseus::get_render_ctx!().global_state.borrow()</code>).</li>
</ol>
<p>In the first case, the reasoning is simple. State thawing is a gradual process, so the state for a page won't be thawed until the user actually visits that page. This is why it's much better to use global state for state that needs to be shared between pages, and you should generally avoid extracting state from other pages.</p>
<p>In the second case, the reason is similar. When you get the global state directly in this way, you bypass the thawing process altogether, meaning thawed state won't show up. If you need to access the global state, you should do it by making it the second argument to your template function (as documented <a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">here</a>).</p>
<p><em>Note: in a future version of Perseus, thawing logic may be altered so that direct access does become possible, but it's currently not.</em></p>
</details>
</div></main></div><div data-hk="2.15" class="row-start-2"><footer data-hk="7.0" class="w-full flex justify-center py-5 bg-black text-white"><p data-hk="7.1" class="mx-5 text-center"><span data-hk="7.2">Â© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> 2021-2023, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer></div></div></div></main><!----><script data-hk="0.0" src=".perseus/static/prism.js" defer=""></script><script data-hk="0.1">window.Prism.highlightAll();</script></div><div id="__perseus_popup_error"></div></body></html>