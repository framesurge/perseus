<!DOCTYPE html>
<html class="light"><head><base href="https://framesurge.sh/perseus/" />
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href=".perseus/static/tailwind.css"/><link rel="stylesheet" href=".perseus/static/styles/style.css"/>
            <script type="module">window.__PERSEUS_RENDER_CFG = `{"docs/0.2.x/strategies/build-state":"docs","docs/0.3.4/advanced/subsequent-loads":"docs","docs/next/state/intro":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs/0.3.4/reference/plugins/tinker":"docs","docs/reference/templates/router-state":"docs","docs/next/fundamentals/reactor":"docs","docs/advanced/subsequent-loads":"docs","docs/0.3.4/reference/deploying/size":"docs","":"","docs/next/migrating":"docs","docs/next/first-app/error-handling":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/reference/templates/intro":"docs","docs/0.2.x/define-app":"docs","plugins":"plugins","docs/reference/deploying/size":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/0.3.4/advanced/intro":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/0.1.x/error_pages":"docs","docs/reference/i18n/other-engines":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs","docs/0.3.4/what-is-perseus":"docs","docs/reference/state/rx":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.3.4/reference/templates/metadata-modification":"docs","docs/0.3.4/reference/cli":"docs","docs/0.2.x/testing/intro":"docs","docs/reference/strategies/intro":"docs","docs/0.3.4/reference/pitfalls-and-bugs":"docs","docs/next/fundamentals/testing":"docs","docs/0.1.x/strategies/intro":"docs","docs/next/fundamentals/routing":"docs","docs/reference/i18n/translations-managers":"docs","docs/0.3.4/tutorials/hello-world":"docs","docs/0.1.x/cli":"docs","docs/0.3.4/reference/i18n/translations-managers":"docs","docs/reference/plugins/tinker":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/0.3.0-0.3.3/views":"docs","docs/0.3.4/reference/hydration":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/next/state/request":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/advanced/routing":"docs","docs/reference/plugins/functional":"docs","docs/0.3.4/reference/i18n/defining":"docs","docs/next/fundamentals/static-content":"docs","docs/next/state/global":"docs","docs/0.3.4/reference/deploying/intro":"docs","docs/reference/exporting":"docs","docs/next/fundamentals/preloading":"docs","docs/0.1.x/templates":"docs","docs/0.3.4/intro":"docs","docs/0.3.4/reference/strategies/revalidation":"docs","docs/0.4.x/reference/initial_subsequent_loads":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/0.3.4/tutorials/auth":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.4.x/reference/hydration":"docs","docs/0.3.4/advanced/route-announcer":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/0.4.x/reference/compilation-times":"docs","docs/reference/strategies/build-state":"docs","docs/next/fundamentals/serving-exporting":"docs","docs/0.3.4/reference/ejecting":"docs","docs/next/capsules/intro":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/reference/styling":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.4/tutorials/second-app":"docs","docs/reference/plugins/publishing":"docs","docs/0.3.4/reference/error-pages":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/next/state/amalgamation":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/0.3.4/reference/views":"docs","docs/0.4.x/reference/live-reloading-and-hsr":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/0.3.4/reference/strategies/build-paths":"docs","docs/next/fundamentals/i18n":"docs","docs/0.3.4/advanced/routing":"docs","docs/reference/engines":"docs","comparisons":"comparisons","docs/advanced/initial-loads":"docs","docs/reference/i18n/using":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.1.x/setup":"docs","docs/0.4.x/reference/state-platform":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/0.3.4/reference/strategies/build-state":"docs","docs/reference/deploying/docker":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/0.3.4/advanced/arch":"docs","docs/reference/hydration":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","docs/0.3.4/reference/i18n/intro":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.4.x/intro":"docs","docs/reference/views":"docs","docs/reference/debugging":"docs","docs/reference/plugins/control":"docs","docs/0.3.4/reference/plugins/intro":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.4/reference/plugins/control":"docs","docs/reference/strategies/request-state":"docs","docs/0.3.4/reference/engines":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/next/first-app/installation":"docs","docs/next/fundamentals/debugging":"docs","docs/0.2.x/second-app":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/reference/server-communication":"docs","docs/advanced/arch":"docs","docs/next/state/browser":"docs","docs/reference/cli":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.3.4/advanced/initial-loads":"docs","docs/0.4.x/reference/plugins":"docs","docs/0.4.x/reference/migrating":"docs","docs/0.2.x/testing/manual":"docs","docs/0.3.4/reference/updating":"docs","docs/reference/pitfalls-and-bugs":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/next/fundamentals/plugins":"docs","docs/0.3.4/reference/deploying/serverless":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/reference/deploying/serverful":"docs","docs/reference/plugins/writing":"docs","docs/next/fundamentals/styling":"docs","docs/reference/strategies/build-paths":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/reference/testing/manual":"docs","docs/0.4.x/reference/exporting":"docs","docs/0.2.x/debugging":"docs","docs/next/fundamentals/perseus-app":"docs","docs/0.2.x/error-pages":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.3.4/reference/index-view":"docs","docs/reference/perseus-app":"docs","docs/intro":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/next/first-app/dev-cycle":"docs","docs/reference/state/freezing":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.3.4/reference/state/hsr":"docs","docs/next/what-is-perseus":"docs","docs/reference/index-view":"docs","docs/0.3.4/reference/live-reloading":"docs","docs/reference/testing/intro":"docs","docs/next/state/build":"docs","docs/0.3.4/reference/strategies/amalgamation":"docs","docs/0.3.4/reference/state/idb-freezing":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/core-principles":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/0.2.x/advanced/routing":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/reference/strategies/amalgamation":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.3.4/reference/plugins/using":"docs","docs/0.3.4/reference/testing/fantoccini-basics":"docs","docs/reference/state/idb-freezing":"docs","docs/next/core-principles":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/reference/deploying/serverless":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.1.x/config_managers":"docs","docs/0.3.4/reference/styling":"docs","docs/0.4.x/what-is-perseus":"docs","docs/reference/templates/metadata-modification":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/0.3.4/reference/plugins/functional":"docs","docs/0.2.x/strategies/request-state":"docs","docs/advanced/route-announcer":"docs","docs/reference/stores":"docs","docs/0.3.4/reference/define-app":"docs","docs/0.2.x/i18n/using":"docs","docs/0.2.x/styling":"docs","docs/0.4.x/features":"docs","docs/0.3.4/reference/plugins/writing":"docs","docs/0.4.x/reference/architecture":"docs","docs/0.2.x/cli":"docs","docs/next/state/revalidation":"docs","docs/next/state/freezing-thawing":"docs","docs/next/fundamentals/head-headers":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/0.1.x/arch":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/reference/updating":"docs","docs/0.2.x/hello-world":"docs","docs/0.1.x/building":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/tutorials/hello-world":"docs","docs/0.3.4/reference/deploying/relative-paths":"docs","docs/reference/testing/checkpoints":"docs","docs/next/first-app/defining":"docs","docs/next/capsules/using":"docs","docs/0.4.x/reference/faq":"docs","docs/0.3.4/reference/deploying/serverful":"docs","docs/0.3.4/reference/static-content":"docs","docs/next/state/suspense":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/reference/live-reloading":"docs","docs/0.3.4/reference/exporting":"docs","docs/0.3.4/reference/deploying/docker":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/next/state/helper":"docs","docs/0.3.4/reference/strategies/request-state":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/0.3.4/reference/plugins/publishing":"docs","docs/next/faq":"docs","docs/0.3.4/reference/testing/manual":"docs","docs/0.3.4/reference/state/global":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/reference/error-pages":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/reference/plugins/security":"docs","docs/0.2.x/templates/intro":"docs","docs/next/fundamentals/hydration":"docs","docs/what-is-perseus":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/reference/i18n/intro":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/0.2.x/intro":"docs","docs/0.3.4/reference/templates/setting-headers":"docs","docs/0.3.4/reference/snooping":"docs","docs/0.3.4/reference/strategies/incremental":"docs","docs/next/fundamentals/js-interop":"docs","docs/reference/static-content":"docs","docs/0.3.4/reference/i18n/other-engines":"docs","docs/0.3.4/reference/i18n/using":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/reference/deploying/intro":"docs","docs/0.2.x/updating":"docs","docs/0.4.x/reference/state-generation":"docs","docs/0.3.4/reference/templates/intro":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/reference/state/hsr":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.3.4/reference/testing/checkpoints":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.3.4/reference/state/freezing":"docs","docs/next/capsules/capsules-vs-components":"docs","docs/0.3.4/reference/plugins/security":"docs","docs/tutorials/second-app":"docs","docs/0.3.4/reference/testing/intro":"docs","docs/0.3.4/reference/templates/router-state":"docs","docs/0.3.4/reference/stores":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.2.x/config-managers":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/tutorials/auth":"docs","docs/0.4.x/core-principles":"docs","docs/reference/state/global":"docs","docs/reference/plugins/using":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.1.x/intro":"docs","docs/0.3.4/reference/strategies/intro":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/next/quickstart":"docs","docs/0.3.4/reference/state/rx":"docs","docs/reference/ejecting":"docs","docs/0.3.4/core-principles":"docs","docs/reference/plugins/intro":"docs","docs/next/intro":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/0.4.x/reference/i18n":"docs","docs/next/first-app/generating-pages":"docs","docs/next/first-app/deploying":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/next/state/manual":"docs","docs/0.2.x/templates/setting-headers":"docs","docs":"docs","docs/next/fundamentals/compilation-times":"docs","docs/0.2.x/deploying/intro":"docs","docs/reference/snooping":"docs","docs/reference/strategies/incremental":"docs","docs/0.2.x/static-content":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/next/fundamentals/error-views":"docs","docs/reference/define-app":"docs","docs/reference/i18n/defining":"docs","docs/0.2.x/i18n/intro":"docs","docs/reference/strategies/revalidation":"docs","docs/0.3.4/reference/perseus-app":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/0.4.x/reference/router":"docs","docs/0.2.x/ejecting":"docs","docs/0.2.x/views":"docs","docs/reference/deploying/relative-paths":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/reference/templates/setting-headers":"docs","docs/0.3.4/reference/debugging":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/0.1.x/routing":"docs","docs/0.4.x/reference/deploying":"docs","docs/0.1.x/serving":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/advanced/intro":"docs","docs/0.3.4/reference/server-communication":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/next/state/incremental":"docs","docs/reference/testing/fantoccini-basics":"docs"}`;

        import init from "https://framesurge.sh/perseus/.perseus/bundle.js";
        async function main() {
            await init("https://framesurge.sh/perseus/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `null`;</script>
            <meta itemprop="__perseus_head_boundary" content="">
            
<title>Reactive State | Perseus Docs</title><link rel="stylesheet" href=".perseus/static/styles/markdown.css"/><link rel="stylesheet" href=".perseus/static/styles/docs_links_markdown.css"/><link rel="stylesheet" href=".perseus/static/prism.css"/>
            <script>
window.__PERSEUS_INITIAL_STATE = `{"content":"<h1>Reactive State</h1>\\n<p>In v0.3.4, Perseus added support for <em>reactive state</em>, which we talked about a bit in the tutorials at the beginning of the documentation. If you've come from a Perseus version before v0.3.4, this system will be quite new to you, as it adds a whole new platform on which templates can interact with their state. Originally, you could generate state, and then it would be done, and the template would receive it as is. Now, that state can be made <em>reactive</em> by wrapping all its fields inside <code>Signal</code>s, and it will then be added to a global store of page state. The platform this is built on allows a whole new level of state mechanics in Perseus, including <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">global state</a> and even <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr\\">hot state reloading</a> (a world first to our knowledge)!</p>\\n<p>In essence, Perseus now provides a way to make your state automatically reactive, which enables some <em>really</em> cool new features!</p>\\n<p>To use this new platform, just annotate a state <code>struct</code> with <code>#[perseus::make_rx(RxName)]</code>, where <code>RxName</code> is the name of the new reactive <code>struct</code> (e.g. <code>IndexState</code> might become <code>IndexStateRx</code>). This macro wraps every single property in your <code>struct</code> in a <code>Signal</code> and produces a new reactive version that way, implementing <code>perseus::state::MakeRx</code> on the original to provide a method <code>.make_rx()</code> that can be used to convert from the unreactive version to the reactive one (there's also the reverse through <code>perseus::state::MakeUnrx</code>, which is implemented on the new, reactive version). If you have fields on your <code>struct</code> that are themselves <code>struct</code>s, you'll need to nest that reactivity, which you can do by adding <code>#[rx::nested(&quot;field&quot;, FieldRxName)]</code> just underneath the <code>#[make_rx(...)]</code> macro, providing it the name of the field and the type of the reactive version (which you'd generated with <code>#[make_rx(...)]</code>). Notably, <code>#[make_rx(...)]</code> automatically derives <code>Serialize</code>, <code>Deserialize</code>, and <code>Clone</code> on your <code>struct</code> (so don't derive them yourself!).</p>\\n<p><em>Note: Sycamore has a proposal to support fine-grained reactivity like this through observers, which will supersede this when they're released, and they'll make all this even faster! Right now, everything has to be cloned unfortunately.</em></p>\\n<p>Once you've got some reactive versions of your state <code>struct</code>s ready, you should generate the unreactive versions as usual in functions like <code>get_build_state()</code>, but then set the first argument on your template function to the reactive version (e.g. <code>IndexStateRx</code> rather than <code>IndexState</code>). This requires Perseus to convert between the unreactive and reactive versions in the background, which you can enable by changing the old <code>#[template(...)]</code> (used in the old documentation/tutorials) to <code>#[template_rx]</code> and removing the Sycamore <code>#[component]</code> annotation (this is added automatically by <code>#[template_rx]</code>). Behind the scenes, you've just enabled the world's most powerful state platform, and not only will your state be made reactive for you, it will be added to the <em>page state store</em>, a global store that enables Perseus to cache the state of a page. So, if your users start filling out forms on page 1 and then go to page 2, and then come back to page 1, their forms will be just how they left them. (Not sure about you, but it feels to us like it's about time this was the default on the web!)</p>\\n<p><em>Side note: if you think this behavior is horrific, you can still use the old \`#[template(...)] macro, and we have no plans to deprecate it. Perseus' original unreactive state system worked very well, and there are still plenty of use cases where you may not want all this newfangled reactive state nonsense (like completely static blogs).</em></p>\\n<p>You may be wondering what the benefits of having a reactive state are. Well, the intention is this: every possible state your page can be in should be representable in your state. That means that, whenever you'd usually declare a new variable in a <code>Signal</code> to handle some state, you can move it into your template's state and handle it there instead, making things cleaner and taking advantage of Perseus' state caching system. If your entire app doesn't use any of this though, you can still trivially use the old state platform if you want to.</p>\\n<h2>Example</h2>\\n<p>This can all be a bit hard to imagine, so here's how it looks in practice with a simple state involving a <code>username</code> that the user can type in, and then it'll be displayed back to them. You can see the source <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/core/rx_state/src/templates/index.rs\\">here</a>.</p>\\n<pre><code class=\\"language-rust\\">use perseus::{Html, RenderFnResultWithCause, Template};\\nuse sycamore::prelude::{view, SsrNode, View};\\n\\n#[perseus::make_rx(IndexPageStateRx)]\\npub struct IndexPageState {\\n    pub username: String,\\n}\\n\\n// This macro will make our state reactive *and* store it in the page state store, which means it'll be the same even if we go to the about page and come back (as long as we're in the same session)\\n#[perseus::template_rx]\\npub fn index_page(state: IndexPageStateRx) -&gt; View&lt;G&gt; {\\n    let username = state.username;\\n    let username_2 = username.clone();\\n\\n    view! {\\n        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n        input(bind:value = username_2, placeholder = &quot;Username&quot;)\\n\\n        a(href = &quot;about&quot;, id = &quot;about-link&quot;) { &quot;About&quot; }\\n    }\\n}\\n\\n#[perseus::head]\\npub fn head() -&gt; View&lt;SsrNode&gt; {\\n    view! {\\n        title { &quot;Index Page&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;index&quot;)\\n        .template(index_page)\\n        .head(head)\\n        .build_state_fn(get_build_state)\\n}\\n\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(\\n    _path: String,\\n    _locale: String,\\n) -&gt; RenderFnResultWithCause&lt;IndexPageState&gt; {\\n    Ok(IndexPageState {\\n        username: &quot;&quot;.to_string(),\\n    })\\n}\\n\\n</code></pre>\\n<p>The only particularly unergonomic thing here is that we have to <code>.clone()</code> the <code>username</code> so that we can both <code>bind:value</code> to it and display it. Note that this will be made unnecessary with Sycamore's new reactive primitives (which will be released soon).</p>\\n<h2>Accessing Another Page's State</h2>\\n<p>Because every template that uses this pattern will have its state added to a special <em>page state store</em>, you can actually access the state of another page quite easily. However, you must be careful doing this, because the other page's state will only be available if it's been loaded by the user. On the server, every page is loaded in its own little silo to prevent corruption, so no other page will ever have been 'loaded'. As for in the browser, you might design an app in which it's only possible to get to a certain page by going through another, but you still can't assume that that page has been loaded, because <a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing\\">state freezing</a> can let a user pick up from any page in your app, and such special rendering flows will be shattered.</p>\\n<p>All that said, you can access another page's state like so (see <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/core/rx_state/src/templates/about.rs\\">here</a>):</p>\\n<pre><code class=\\"language-rust\\">use crate::templates::index::IndexPageStateRx;\\nuse perseus::{get_render_ctx, Html, Template};\\nuse sycamore::prelude::{view, Signal};\\nuse sycamore::view::View;\\n\\n// WARNING: Accessing the page state store manually as this template does is NOT recommended, and is done for demonstration purposes only! In reality, you should use global state for anything that\\n// you need to share between pages.\\n\\n#[perseus::template_rx]\\npub fn about_page() -&gt; View&lt;G&gt; {\\n    // Get the page state store manually\\n    // The index page is just an empty string\\n    let index_props_rx = get_render_ctx!()\\n        .page_state_store\\n        .get::&lt;IndexPageStateRx&gt;(&quot;&quot;);\\n    // Get the state from the index page\\n    // If the user hasn't visited there yet, this won't exist\\n    let username = match index_props_rx {\\n        Some(IndexPageStateRx { username }) =&gt; username,\\n        None =&gt; Signal::new(&quot;&quot;.to_string()),\\n    };\\n\\n    view! {\\n        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n\\n        a(href = &quot;&quot;) { &quot;Index&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;about&quot;).template(about_page)\\n}\\n\\n</code></pre>\\n","current_version":"0.3.4","manifest":{"0.1.x":{"docs_rs":"0.1","git":"v0.1.4","state":"outdated"},"0.2.x":{"docs_rs":"0.2","git":"v0.2.3","state":"outdated"},"0.3.0-0.3.3":{"docs_rs":"0.3.3","git":"v0.3.3","state":"outdated"},"0.3.4":{"docs_rs":"0.3","git":"v0.3.6","state":"stable"},"0.4.x":{"docs_rs":"0.4.0-beta","git":"HEAD","state":"beta"}},"sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app\\"><code>PerseusApp</code></a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app\\"><code>define_app!</code></a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views\\">Writing Views</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view\\">The Index View</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading\\">Live Reloading</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing\\">State Freezing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing\\">Freezing to IndexedDB</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr\\">Hot State Reloading (HSR)</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines\\">Engines</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating\\">Migrating from v0.3.3</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer\\">Route Announcer</a></li>\\n</ul>\\n<hr />\\n<h1>Further Tutorials</h1>\\n<ul>\\n<li><a href=\\"docs/tutorials/auth\\">Authentication</a></li>\\n</ul>\\n","status":"Stable","title":"Reactive State"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = `{
    "perseus": "Perseus",
    "sycamore": "Sycamore",
    "navlinks.docs": "Docs",
    "navlinks.comparisons": "Comparisons",
    "navlinks.plugins": "Plugins",
    "index-intro.heading": "The Rust framework for the modern web",
    "index-intro.get-started-button": "Get started now",
    "index-intro.github-button": "GitHub",
    "index-state-gen.heading": "Generate state, on your terms",
    "index-state-gen.desc": "Perseus apps can generate state whenever they like and pass it to <a href=\\"https://github.com/sycamore-rs/sycamore\\" class=\\"underline\\">Sycamore</a>, one of the fastest web frameworks in the world.",
    "index-i18n.heading.start": "I18n",
    "index-i18n.heading.rest": " that just works",
    "index-i18n.heading.tooltip": "Internationalization",
    "index-i18n.desc": "Just add translations using <a href=\\"https://projectfluent.org\\" class=\\"underline\\">Fluent</a>, and your app can be set up in seconds in multiple languages, with automatic user locale detection.",
    "index-opts.heading": "You want options? We got options.",
    "index-opts.desc": "Perseus comes with a built-in plugins system and full customizability of almost every part of the system. Static exporting? Serverful deployment? Fetch data by carrier pigeon? Easy.",
    "index-speed.heading": "Fast. Crazy. Fast.",
    "index-speed.desc-line-1": "Underlying platform? <strong>Rust.</strong>",
    "index-speed.desc-line-2": "Target platform? <strong>WebAssembly.</strong>",
    "index-speed.desc-line-3": "Lighthouse scores? <strong>ðŸ’¯</strong>",
    "index-speed.desktop-perf-label": "Performance (Desktop)",
    "index-speed.mobile-perf-label": "Performance (Mobile)",
    "index-speed.best-practices-label": "Best Practices",
    "index-cta.heading": "Get started with Perseus today!",
    "index-cta.docs-button": "Docs",
    "index-cta.gh-button": "GitHub",
    "index-cta.api-docs-button": "API Docs",
    "index-cta.crates-io-button": "Crates.io",
    "index-cta.matrix-button": "Matrix",
    "index-cta.discord-button": "Discord",
    "index-cta.comparisons-button": "Comparisons",
    "footer.copyright": "Â© <a href=\\"https://github.com/arctic-hen7\\" class=\\"underline\\">arctic-hen7</a> { $years }, see license <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/LICENSE\\" class=\\"underline\\">here</a>.",
    "comparisons-title": "Comparisons to Other Frameworks",
    "comparisons-heading": "Comparisons",
    "comparisons-subtitle": "See how Perseus compares to other web development frameworks.",
    "comparisons-extra": "Is there anything we're missing here? Please <a href =\\"https://github.com/framesurge/perseus/issues/new/choose\\" class=\\"underline\\">open an issue</a> and let us know!",
    "comparisons-table-header": "Comparison",
    "comparisons-table-headings.name": "Name",
    "comparisons-table-headings.supports_ssg": "Static generation",
    "comparisons-table-headings.supports_ssr": "Server-side rendering",
    "comparisons-table-headings.supports_ssr_ssg_same_page": "SSG & SSR in same page",
    "comparisons-table-headings.supports_i18n": "Internationalization",
    "comparisons-table-headings.supports_incremental": "Incremental generation",
    "comparisons-table-headings.supports_revalidation": "Revalidation",
    "comparisons-table-headings.inbuilt_cli": "Inbuilt CLI",
    "comparisons-table-headings.inbuilt_routing": "Routing support",
    "comparisons-table-headings.supports_shell": "App shell",
    "comparisons-table-headings.supports_deployment": "Easy deployment",
    "comparisons-table-headings.supports_exporting": "Static exporting",
    "comparisons-table-headings.language": "Language",
    "comparisons-table-headings.homepage_lighthouse_desktop": "Homepage Lighthouse Score (Desktop)",
    "comparisons-table-headings.homepage_lighthouse_mobile": "Homepage Lighthouse Score (Mobile)",
    "comparisons-table-details.supports_ssg": "Whether or not the framework supports pre-rendering pages at build-time.",
    "comparisons-table-details.supports_ssr": "Whether or not the framework supports rendering pages dynamically when they're requested.",
    "comparisons-table-details.supports_ssr_ssg_same_page": "Whether or not the framework supports SSG and SSR (see above) in the very same page.",
    "comparisons-table-details.supports_i18n": "Whether or not the framework supports building a multilingual app. Some frameworks support this through plugins.",
    "comparisons-table-details.supports_incremental": "Whether or not the framework supports rendering pages on-demand and then caching them for future use.",
    "comparisons-table-details.supports_revalidation": "Whether or not the framework supports rebuilding pages that were built at build-time at request-time. Some frameworks can do this by time, or by custom logic. Perseus supports both.",
    "comparisons-table-details.inbuilt_cli": "Whether or not the framework has a command-line interface for convenient usage. Some frameworks use third-party CLIs.",
    "comparisons-table-details.inbuilt_routing": "Whether or not the framework supports inbuilt routing. Most frameworks have their own way of doing this if they do support it.",
    "comparisons-table-details.supports_shell": "Whether or not this framework has an app shell, which makes switching pages much faster and cleaner.",
    "comparisons-table-details.supports_deployment": "Whether or not this framework supports easy deployment. Perseus can deploy in one command.",
    "comparisons-table-details.supports_exporting": "Whether or not this framework can operate without a server, as a series of purely static files.",
    "comparisons-table-details.language": "The programming language this framework is built in. (Hint: Rust is the fastest!)",
    "comparisons-table-details.homepage_lighthouse_desktop": "The Lighthouse score out of 100 for desktop (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-table-details.homepage_lighthouse_mobile": "The Lighthouse score out of 100 for mobile (higher is better). These are collected from Google's PageSpeed Insights tool. These are for the framework's website, and may not reflect the performance of all sites made with the framework.",
    "comparisons-sycamore-heading": "Perseus vs Sycamore",
    "comparisons-sycamore-text": "Perseus is a framework that uses Sycamore to write views (the things users see), so there's not much point in comparing the two as competitors. However, Sycamore can be used without Perseus, which works perfectly well, though you'll miss out on features like inbuilt internationalization, static generation (though you could build this yourself), and incremental generation. If you want to build just a bit of your site with Rust, Sycamore is the perfect tool, Perseus is a full framework designed for building entire websites.",
    "comparisons-unknown-heading": "Perseus vs { $name }",
    "docs-title-base": "Perseus Docs",
    "docs-status.outdated": "This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.beta": "This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-status.next": "This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href=\\"en-US/docs/{ $stable }/intro\\" class=\\"underline\\">here</a>.",
    "docs-version-switcher.next": "Next (unreleased)",
    "docs-version-switcher.beta": "v{ $version } (beta)",
    "docs-version-switcher.stable": "v{ $version } (stable)",
    "docs-version-switcher.outdated": "v{ $version } (outdated)",
    "plugins-title": "Plugins",
    "plugins-title-full": "Perseus Plugins",
    "plugin-card-author": "By { $author }",
    "plugin-details.repo_link": "Repository:",
    "plugin-details.crates_link": "Crate page:",
    "plugin-details.docs_link": "Docs:",
    "plugin-details.site_link": "Site:",
    "plugin-details.metadata_heading": "Metadata",
    "plugin-details.no_link_text": "N/A",
    "plugin-search.placeholder": "Search",
    "plugin-search.no_results": "No results found.",
    "plugins-desc": "These are all the public plugins for Perseus! If you've made a plugin, and you'd like it to be listed here, please open an issue on our repository!",
    "search": "Search the docs",
    "index-example-switcher.excerpts": "Excerpts",
    "index-example-switcher.full": "Full"
}
`;</script>
            <meta itemprop="__perseus_head_end" content="">
            <script>//</script>
            </head><body class="bg-white dark:bg-neutral-900"><div id="root"><header data-hk="8.0" class="shadow-md sm:p-2 w-full mb-20 bg-neutral-500/30 backdrop-blur-lg text-black dark:text-white"><div data-hk="8.1" class="flex justify-between items-center"><a data-hk="8.2" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl text-bold title-font" href="en-US/">Perseus</a><div data-hk="8.3" class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 "><div data-hk="8.4" class="tham-box"><div data-hk="8.5" class="tham-inner bg-black dark:bg-white"></div></div></div><nav data-hk="8.6" class="hidden md:flex"><ul data-hk="8.7" class="mr-5 flex"><li data-hk="9.0" class="m-3 p-1 title-font"><a data-hk="9.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="9.2" class="m-3 p-1 title-font"><a data-hk="9.3" href="en-US/comparisons" class="px-2">Comparisons</a></li><li data-hk="9.4" class="m-3 p-1 title-font"><a data-hk="9.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul></nav></div><nav data-hk="8.8" id="mobile_nav_menu" class="md:hidden w-full text-center justify-center hidden"><ul data-hk="8.9" class="mr-5"><li data-hk="10.0" class="m-3 p-1 title-font"><a data-hk="10.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="10.2" class="m-3 p-1 title-font"><a data-hk="10.3" href="en-US/comparisons" class="px-2">Comparisons</a></li><li data-hk="10.4" class="m-3 p-1 title-font"><a data-hk="10.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul><hr data-hk="2.0"/><div data-hk="2.1" class="text-left p-3 overflow-y-scroll h-[60vh]"><div data-hk="2.2" class="flex w-full justify-center text-center"><div data-hk="2.3" class="max-w-3xl flex flex-col"><!--#--><!----><!--/--><!----><!--#--><!----><select data-hk="4.4" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="4.5" value="next">Next (unreleased)</option><option data-hk="4.0" value="0.4.x">v0.4.x (beta)</option><option data-hk="4.6" value="0.3.4" selected="">v0.3.4 (stable)</option><option data-hk="4.1" value="0.3.0-0.3.3">v0.3.0-0.3.3 (outdated)</option><option data-hk="4.2" value="0.2.x">v0.2.x (outdated)</option><option data-hk="4.3" value="0.1.x">v0.1.x (outdated)</option></select><!--/--></div></div><div data-hk="2.4" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/intro">Introduction</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles">Core Principles</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views">Writing Views</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging">Debugging</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages">Error Pages</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content">Static Content</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using">Using Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state">Build State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state">Request State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration">Hydration</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">Global State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli">CLI</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting">Ejecting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling">Styling</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores">Stores</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting">Static Exporting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control">Control Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines">Engines</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating">Migrating from v0.3.3</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch">Architecture</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer">Route Announcer</a></li>
</ul>
<hr />
<h1>Further Tutorials</h1>
<ul>
<li><a href="docs/tutorials/auth">Authentication</a></li>
</ul>
</div></div></nav></header><main data-hk="2.16" id="scroll-container"><div data-hk="2.5" class="flex w-full"><div data-hk="2.6" class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 hidden md:block max-w-xs w-full border-r overflow-y-auto"><div data-hk="2.7" class="mr-5"><div data-hk="2.8" class="text-left text-black dark:text-white p-3"><aside data-hk="2.9"><div data-hk="2.10" class="flex flex-col"><!--#--><!----><!--/--><!----><!--#--><!----><select data-hk="6.4" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="6.5" value="next">Next (unreleased)</option><option data-hk="6.0" value="0.4.x">v0.4.x (beta)</option><option data-hk="6.6" value="0.3.4" selected="">v0.3.4 (stable)</option><option data-hk="6.1" value="0.3.0-0.3.3">v0.3.0-0.3.3 (outdated)</option><option data-hk="6.2" value="0.2.x">v0.2.x (outdated)</option><option data-hk="6.3" value="0.1.x">v0.1.x (outdated)</option></select><!--/--></div><div data-hk="2.11" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/intro">Introduction</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/core-principles">Core Principles</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/views">Writing Views</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/debugging">Debugging</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/error-pages">Error Pages</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/static-content">Static Content</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/using">Using Translations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-state">Build State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/request-state">Request State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/hydration">Hydration</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">Global State</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/cli">CLI</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/ejecting">Ejecting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/styling">Styling</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/stores">Stores</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/exporting">Static Exporting</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/control">Control Actions</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/engines">Engines</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/updating">Migrating from v0.3.3</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/arch">Architecture</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/advanced/route-announcer">Route Announcer</a></li>
</ul>
<hr />
<h1>Further Tutorials</h1>
<ul>
<li><a href="docs/tutorials/auth">Authentication</a></li>
</ul>
</div></aside></div></div></div><div data-hk="2.12" class="h-screen pt-14 xs:pt-16 sm:pt-20 lg:pt-25 grid grid-rows-[1fr_min-content] w-full overflow-y-auto"><div data-hk="2.13" class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0"><!--#--><!----><!--/--><main data-hk="2.14" class="text-black dark:text-white"><div data-hk="1.0" class="markdown min-w-0 pb-10"><h1>Reactive State</h1>
<p>In v0.3.4, Perseus added support for <em>reactive state</em>, which we talked about a bit in the tutorials at the beginning of the documentation. If you've come from a Perseus version before v0.3.4, this system will be quite new to you, as it adds a whole new platform on which templates can interact with their state. Originally, you could generate state, and then it would be done, and the template would receive it as is. Now, that state can be made <em>reactive</em> by wrapping all its fields inside <code>Signal</code>s, and it will then be added to a global store of page state. The platform this is built on allows a whole new level of state mechanics in Perseus, including <a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/global">global state</a> and even <a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/hsr">hot state reloading</a> (a world first to our knowledge)!</p>
<p>In essence, Perseus now provides a way to make your state automatically reactive, which enables some <em>really</em> cool new features!</p>
<p>To use this new platform, just annotate a state <code>struct</code> with <code>#[perseus::make_rx(RxName)]</code>, where <code>RxName</code> is the name of the new reactive <code>struct</code> (e.g. <code>IndexState</code> might become <code>IndexStateRx</code>). This macro wraps every single property in your <code>struct</code> in a <code>Signal</code> and produces a new reactive version that way, implementing <code>perseus::state::MakeRx</code> on the original to provide a method <code>.make_rx()</code> that can be used to convert from the unreactive version to the reactive one (there's also the reverse through <code>perseus::state::MakeUnrx</code>, which is implemented on the new, reactive version). If you have fields on your <code>struct</code> that are themselves <code>struct</code>s, you'll need to nest that reactivity, which you can do by adding <code>#[rx::nested(&quot;field&quot;, FieldRxName)]</code> just underneath the <code>#[make_rx(...)]</code> macro, providing it the name of the field and the type of the reactive version (which you'd generated with <code>#[make_rx(...)]</code>). Notably, <code>#[make_rx(...)]</code> automatically derives <code>Serialize</code>, <code>Deserialize</code>, and <code>Clone</code> on your <code>struct</code> (so don't derive them yourself!).</p>
<p><em>Note: Sycamore has a proposal to support fine-grained reactivity like this through observers, which will supersede this when they're released, and they'll make all this even faster! Right now, everything has to be cloned unfortunately.</em></p>
<p>Once you've got some reactive versions of your state <code>struct</code>s ready, you should generate the unreactive versions as usual in functions like <code>get_build_state()</code>, but then set the first argument on your template function to the reactive version (e.g. <code>IndexStateRx</code> rather than <code>IndexState</code>). This requires Perseus to convert between the unreactive and reactive versions in the background, which you can enable by changing the old <code>#[template(...)]</code> (used in the old documentation/tutorials) to <code>#[template_rx]</code> and removing the Sycamore <code>#[component]</code> annotation (this is added automatically by <code>#[template_rx]</code>). Behind the scenes, you've just enabled the world's most powerful state platform, and not only will your state be made reactive for you, it will be added to the <em>page state store</em>, a global store that enables Perseus to cache the state of a page. So, if your users start filling out forms on page 1 and then go to page 2, and then come back to page 1, their forms will be just how they left them. (Not sure about you, but it feels to us like it's about time this was the default on the web!)</p>
<p><em>Side note: if you think this behavior is horrific, you can still use the old `#[template(...)] macro, and we have no plans to deprecate it. Perseus' original unreactive state system worked very well, and there are still plenty of use cases where you may not want all this newfangled reactive state nonsense (like completely static blogs).</em></p>
<p>You may be wondering what the benefits of having a reactive state are. Well, the intention is this: every possible state your page can be in should be representable in your state. That means that, whenever you'd usually declare a new variable in a <code>Signal</code> to handle some state, you can move it into your template's state and handle it there instead, making things cleaner and taking advantage of Perseus' state caching system. If your entire app doesn't use any of this though, you can still trivially use the old state platform if you want to.</p>
<h2>Example</h2>
<p>This can all be a bit hard to imagine, so here's how it looks in practice with a simple state involving a <code>username</code> that the user can type in, and then it'll be displayed back to them. You can see the source <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/core/rx_state/src/templates/index.rs">here</a>.</p>
<pre><code class="language-rust">use perseus::{Html, RenderFnResultWithCause, Template};
use sycamore::prelude::{view, SsrNode, View};

#[perseus::make_rx(IndexPageStateRx)]
pub struct IndexPageState {
    pub username: String,
}

// This macro will make our state reactive *and* store it in the page state store, which means it'll be the same even if we go to the about page and come back (as long as we're in the same session)
#[perseus::template_rx]
pub fn index_page(state: IndexPageStateRx) -&gt; View&lt;G&gt; {
    let username = state.username;
    let username_2 = username.clone();

    view! {
        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }
        input(bind:value = username_2, placeholder = &quot;Username&quot;)

        a(href = &quot;about&quot;, id = &quot;about-link&quot;) { &quot;About&quot; }
    }
}

#[perseus::head]
pub fn head() -&gt; View&lt;SsrNode&gt; {
    view! {
        title { &quot;Index Page&quot; }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;index&quot;)
        .template(index_page)
        .head(head)
        .build_state_fn(get_build_state)
}

#[perseus::autoserde(build_state)]
pub async fn get_build_state(
    _path: String,
    _locale: String,
) -&gt; RenderFnResultWithCause&lt;IndexPageState&gt; {
    Ok(IndexPageState {
        username: &quot;&quot;.to_string(),
    })
}

</code></pre>
<p>The only particularly unergonomic thing here is that we have to <code>.clone()</code> the <code>username</code> so that we can both <code>bind:value</code> to it and display it. Note that this will be made unnecessary with Sycamore's new reactive primitives (which will be released soon).</p>
<h2>Accessing Another Page's State</h2>
<p>Because every template that uses this pattern will have its state added to a special <em>page state store</em>, you can actually access the state of another page quite easily. However, you must be careful doing this, because the other page's state will only be available if it's been loaded by the user. On the server, every page is loaded in its own little silo to prevent corruption, so no other page will ever have been 'loaded'. As for in the browser, you might design an app in which it's only possible to get to a certain page by going through another, but you still can't assume that that page has been loaded, because <a href="https://framesurge.sh/perseus/en-US/docs/0.3.4/reference/state/freezing">state freezing</a> can let a user pick up from any page in your app, and such special rendering flows will be shattered.</p>
<p>All that said, you can access another page's state like so (see <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/core/rx_state/src/templates/about.rs">here</a>):</p>
<pre><code class="language-rust">use crate::templates::index::IndexPageStateRx;
use perseus::{get_render_ctx, Html, Template};
use sycamore::prelude::{view, Signal};
use sycamore::view::View;

// WARNING: Accessing the page state store manually as this template does is NOT recommended, and is done for demonstration purposes only! In reality, you should use global state for anything that
// you need to share between pages.

#[perseus::template_rx]
pub fn about_page() -&gt; View&lt;G&gt; {
    // Get the page state store manually
    // The index page is just an empty string
    let index_props_rx = get_render_ctx!()
        .page_state_store
        .get::&lt;IndexPageStateRx&gt;(&quot;&quot;);
    // Get the state from the index page
    // If the user hasn't visited there yet, this won't exist
    let username = match index_props_rx {
        Some(IndexPageStateRx { username }) =&gt; username,
        None =&gt; Signal::new(&quot;&quot;.to_string()),
    };

    view! {
        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }

        a(href = &quot;&quot;) { &quot;Index&quot; }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;about&quot;).template(about_page)
}

</code></pre>
</div></main></div><div data-hk="2.15" class="row-start-2"><footer data-hk="7.0" class="w-full flex justify-center py-5 bg-black text-white"><p data-hk="7.1" class="mx-5 text-center"><span data-hk="7.2">Â© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> 2021-2023, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer></div></div></div></main><!----><script data-hk="0.0" src=".perseus/static/prism.js" defer=""></script><script data-hk="0.1">window.Prism.highlightAll();</script></div><div id="__perseus_popup_error"></div></body></html>